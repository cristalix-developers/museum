apply plugin: 'groovy'

dependencies {
    compileOnly 'bottle:bottle-libs:1.0'
    compileOnly 'cristalix:dark-paper:21.01.12'
    compileOnly 'org.codehaus.groovy:groovy:3.0.5-aug'
    compileOnly 'cristalix:bukkit-core:20.11.11'
    implementation project(':museum-commons')
    implementation 'clepto:clepto-bukkit:3.2.8'
    implementation 'clepto:clepto-cristalix:3.0.0'
}

ext.bukkitPlugin = [mainClass: 'museum.App', dependencies: 'CoreAPI']
apply from: 'bukkitPlugin.gradle'

evaluationDependsOn ':museum-scripts'

def bukkitPluginTask = tasks.bukkitPlugin
def scriptsTask = project(':museum-scripts').tasks.compileScripts
def imageTask = project(':museum-image').tasks.jar

bukkitPluginTask.dependsOn scriptsTask, imageTask

bukkitPluginTask.with imageTask as Jar
bukkitPluginTask.from scriptsTask.outputs

tasks.build.dependsOn bukkitPluginTask